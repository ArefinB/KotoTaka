<!DOCTYPE html>
<html lang="en">

<head>
  <!-- BASIC META -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>KotoTaka ‚Äì Cheapest Tablet Prices in Bangladesh</title>
  <meta name="description"
    content="Find the lowest prices for Samsung, Xiaomi, iPad, Realme & more from local shops in Bangladesh. Updated daily." />

  <link rel="canonical" href="https://kototaka.store" />
  <link rel="alternate" hreflang="bn" href="https://kototaka.store" />
  <link rel="alternate" hreflang="en" href="https://kototaka.store/en" />

  <!-- FAVICON & APPLE TOUCH ICONS -->
  <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" sizes="180x180" href="../favicon.ico" />
  <link rel="icon" type="image/png" sizes="32x32" href="../favicon.ico" />

  <link rel="stylesheet" href="tablet.css" />

  <!-- PWA / iOS SAFARI -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="KotoTaka" />
  <meta name="theme-color" content="#ff4500" />

  <!-- OPEN GRAPH / SOCIAL -->
  <meta property="og:title" content="KotoTaka ‚Äì Cheapest Tablet Prices in BD" />
  <meta property="og:description" content="Track the lowest tablets from local shops in Bangladesh. Updated daily." />
  <meta property="og:image" content="https://i.ibb.co.com/RT56M0kK/KotoTaka.png" />
  <meta property="og:url" content="https://kototaka.store" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="KotoTaka" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="KotoTaka ‚Äì Cheapest Tablet Prices in BD" />
  <meta name="twitter:description" content="Real-time lowest prices from local shops in Bangladesh." />
  <meta name="twitter:image" content="https://i.ibb.co.com/RT56M0kK/KotoTaka.png" />

  <!-- STRUCTURED DATA (JSON-LD) -->
  <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "KotoTaka",
        "alternateName": "‡¶ï‡¶§‡ßã‡¶ü‡¶æ‡¶ï‡¶æ",
        "url": "https://kototaka.store",
        "description": "Find the cheapest tablet prices in Bangladesh from local shops. Updated daily.",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://kototaka.store/?q={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      }
    </script>

  <!-- FONTS (Preload critical) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />

  <!-- CSS -->
  <style>
    :root {
      --bg-gradient: linear-gradient(135deg, #fcede0, #cfdef3);
      --card-bg: rgb(255, 255, 255);
      --text: #1a1a1a;
      --text-light: #555;
      --accent: #ff4500;
      --border: #e0e0e0;
      --shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      --radius: 16px;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      --highlight: #fff5ba;
    }

    [data-theme="dark"] {
      --bg-gradient: linear-gradient(135deg, #161428, #1a2417);
      --card-bg: rgba(20, 25, 35, 0.515);
      --text: #ffffff;
      --text-light: #aaa;
      --accent: #ff5722;
      --border: rgba(255, 255, 255, 0.1);
      --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      --highlight: #ffeb3b33;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Inter", "Segoe UI", sans-serif;
      background: var(--bg-gradient);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      transition: var(--transition);
      position: relative;
      overflow-y: scroll;
    }

    /* Theme Toggle */
    .theme-toggle {
      position: absolute;
      top: 16px 16px;
      right: 16px;
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 50px;
      width: 52px;
      height: 28px;
      cursor: pointer;
      display: flex;
      align-items: center;
      padding: 4px;
      transition: var(--transition);
      backdrop-filter: blur(10px);
      z-index: 100;
    }

    .theme-toggle::before {
      content: "";
      width: 20px;
      height: 20px;
      background: var(--accent);
      border-radius: 50%;
      transition: var(--transition);
      transform: translateX(0);
    }

    [data-theme="dark"] .theme-toggle::before {
      transform: translateX(24px);
    }

    /* Logo */
    .logo {
      max-width: 280px;
      width: 100%;
      height: auto;
      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1));
      margin-bottom: 16px;
    }

    /* Search */
    .search-container {
      position: relative;
      width: 100%;
      max-width: 640px;
      margin-bottom: 16px;
    }

    #search {
      width: 100%;

      padding: 16px 40px 16px 20px;
      font-size: 1.1rem;

      border: 2px solid var(--border);
      border-radius: 16px;
      background: var(--card-bg);
      backdrop-filter: blur(12px);
      outline: none;
      transition: var(--transition);
      box-shadow: var(--shadow);
      color: var(--text);
    }

    [data-theme="dark"] #search,
    [data-theme="dark"] #sortBtn {
      color: #fff !important;
    }

    #search:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 4px rgba(255, 69, 0, 0.2);
      transform: translateY(-2px);
    }

    #autocomplete {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: var(--card-bg);
      /*  border: 1px solid var(--border); */
      border-top: none;
      border-radius: 0 0 16px 16px;
      max-height: 300px;
      overflow-y: auto;
      z-index: 100;
      backdrop-filter: blur(12px);
      box-shadow: var(--shadow);
    }

    .autocomplete-item {
      padding: 14px 20px;
      cursor: pointer;
      transition: var(--transition);
      border-bottom: 1px solid var(--border);
    }

    .autocomplete-item:hover {
      background: rgba(255, 69, 0, 0.1);
      color: var(--accent);
    }

    /* Clear Button */
    .clear-btn {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      cursor: pointer;
      font-weight: bold;
      color: #999;
      font-size: 1.2rem;
      user-select: none;
      display: none;
    }

    #search:not(:placeholder-shown)~.clear-btn {
      display: block;
    }

    .clear-btn:hover {
      color: #555;
    }

    [data-theme="dark"] .clear-btn {
      color: #ccc;
    }

    [data-theme="dark"] .clear-btn:hover {
      color: #fff;
    }

    /* Brand Cards */
    #brandCards {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin: 16px 0;
      padding: 0 8px;
    }

    .brand-card {
      padding: 10px 16px;
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 50px;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.95rem;
      transition: var(--transition);
      backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    .brand-card::after {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    .brand-card:active::after {
      width: 300px;
      height: 300px;
    }

    .brand-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
      border-color: var(--accent);
    }

    .brand-card.selected {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
      box-shadow: 0 4px 12px rgba(255, 69, 0, 0.3);
    }

    .brand-badge {
      margin-left: 6px;
      font-size: 0.7rem;
      background: rgba(0, 0, 0, 0.1);
      color: inherit;
      padding: 2px 6px;
      border-radius: 10px;
    }

    /* Price Range Title */
    .price-range-title {
      text-align: center;
      margin: 20px 0 8px;
      font-size: 0.9rem;
      color: var(--text-light);
    }

    /* Price Range Cards */
    #priceRangeCards {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin: 8px 0;
      padding: 0 8px;
    }

    .price-card {
      padding: 8px 14px;
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 50px;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.9rem;
      transition: var(--transition);
      backdrop-filter: blur(10px);
      max-width: 120px;
      text-align: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    .price-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
      border-color: var(--accent);
    }

    .price-card.selected {
      background: var(--accent);
      color: #fff;
      border-color: var(--accent);
    }

    /* Sort Button */
    #sortBtn {
      display: none;
      margin: 16px auto;
      padding: 10px 20px;
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 50px;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.95rem;
      transition: var(--transition);
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      color: var(--text);
    }

    #sortBtn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
      border-color: var(--accent);
    }

    /* Results */
    #results {
      list-style: none;
      width: 100%;
      max-width: 800px;
      margin-top: 20px;
      display: grid;
      gap: 16px;
      padding: 0 8px;
    }

    /* MODERN GLASSMORPHISM CARD DESIGN */
    #results li {
      background: rgba(255, 255, 255, 0.7);
      border: 1px solid rgba(255, 255, 255, 0.6);
      border-radius: 24px;
      padding: 24px;
      transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
      backdrop-filter: blur(16px) saturate(180%);
      box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.08);
      animation: fadeIn 0.6s ease-out;
      padding-top: 65px;
      position: relative;
      margin-bottom: 24px;
      overflow: visible;
    }

    [data-theme="dark"] #results li {
      background: rgba(30, 30, 35, 0.6);
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.4);
    }

    #results li:hover {
      transform: translateY(-8px) scale(1.01);
      box-shadow: 0 20px 50px -10px rgba(0, 0, 0, 0.15);
      border-color: rgba(255, 69, 0, 0.3);
      z-index: 2;
    }

    [data-theme="dark"] #results li:hover {
      border-color: rgba(255, 87, 34, 0.3);
      box-shadow: 0 20px 50px -10px rgba(0, 0, 0, 0.5);
    }

    .card-content {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 16px;
    }

    .text-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .text-content strong.phone-title {
      font-size: 1.35rem;
      font-weight: 800;
      color: var(--text);
      letter-spacing: -0.02em;
      margin-bottom: 0px;
      display: block;
    }

    .shop {
      display: inline-flex;
      align-items: center;
      gap: px;
      margin-top: 0px;
    }

    .shop-pill {
      background: rgba(255, 69, 0, 0.1);
      color: var(--accent);
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 700;
      letter-spacing: 0.5px;
    }

    .price-tag {
      font-size: 1.4rem;
      font-weight: 800;
      color: var(--text);
      background: linear-gradient(135deg, var(--accent), #ff8a65);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .info {
      font-size: 0.95rem;
      color: var(--text-light);
      line-height: 1.6;
      margin-top: 8px;
    }

    .highlight {
      background: var(--highlight);
      padding: 2px 6px;
      border-radius: 6px;
      font-weight: 600;
    }

    /* Tablet Image - NO BORDER RADIUS */
    .phone-image img {
      max-width: 150px;
      max-height: 200px;
      object-fit: contain;
      border-radius: 0 !important;
    }

    [data-theme="dark"] .phone-image img {
      border-radius: 12px !important;
    }

    .footer-info {
      font-size: 0.8rem;
      color: var(--text-light);
      text-align: center;
      margin-top: 12px;
      opacity: 0.8;
    }

    /* New Loader CSS */
    .container {
      display: flex;
      height: 370px;
      width: 370px;
      justify-content: center;
      align-items: center;
      position: relative;
      flex-direction: column;
    }

    .moon {
      background-color: #39beff;
      height: 170px;
      width: 170px;
      border-radius: 50%;
      position: absolute;
      margin: auto;
      left: 0;
      right: 0;
      top: 0;
      bottom: 0;
      overflow: hidden;
    }

    .crater {
      background-color: #31b4ff;
      height: 30px;
      width: 30px;
      border-radius: 50%;
      position: relative;
    }

    .crater:before {
      content: "";
      position: absolute;
      height: 25px;
      width: 25px;
      border-radius: 50%;
      box-shadow: -5px 0 0 2px #1ca4f9;
      top: 2px;
      left: 7px;
    }

    .crater1 {
      top: 27px;
      left: 90px;
      transform: scale(0.9);
    }

    .crater2 {
      bottom: 15px;
      left: 61px;
      transform: scale(0.6);
    }

    .crater3 {
      left: 15px;
      transform: scale(0.75);
    }

    .crater4 {
      left: 107px;
      top: 32px;
      transform: scale(1.18);
    }

    .crater5 {
      left: 33px;
      bottom: 4px;
      transform: scale(0.65);
    }

    .shadow {
      height: 190px;
      width: 190px;
      box-shadow: none;
      border-radius: 50%;
      position: relative;
      bottom: 157.5px;
      right: 46px;
    }

    [data-theme="dark"] .shadow {
      box-shadow: 21px 0 0 5px rgba(0, 0, 0, 0.15);
    }

    .eye {
      background-color: #161616;
      height: 12px;
      width: 12px;
      position: relative;
      border-radius: 50%;
    }

    .eye-l {
      bottom: 255px;
      left: 59px;
    }

    .eye-r {
      bottom: 267px;
      left: 101px;
    }

    .mouth {
      height: 5px;
      width: 10px;
      border: 3px solid #161616;
      position: relative;
      bottom: 262px;
      left: 79px;
      border-top: none;
      border-radius: 0 0 10px 10px;
    }

    .blush {
      background-color: #1ca4f9;
      height: 7.5px;
      width: 7.5px;
      position: relative;
      border-radius: 50%;
    }

    .blush1 {
      bottom: 273px;
      left: 50px;
    }

    .blush2 {
      bottom: 281px;
      left: 115px;
    }

    .orbit {
      height: 280px;
      width: 280px;
      border-radius: 50%;
      position: absolute;
      margin: auto;
      left: 0;
      right: 0;
      top: 0;
      bottom: 0;
      animation: spin 10s infinite linear;
    }

    @keyframes spin {
      100% {
        transform: rotate(360deg);
      }
    }

    .rocket {
      background-color: #fafcf7;
      height: 50px;
      width: 25px;
      border-radius: 50% 50% 0 0;
      position: relative;
      left: -11px;
      top: 112px;
      overflow: visible;
    }

    .rocket:before {
      content: "";
      position: absolute;
      background-color: #39beff;
      height: 20px;
      width: 55px;
      border-radius: 50% 50% 0 0;
      z-index: -1;
      right: -15px;
      bottom: 0;
    }

    .rocket:after {
      content: "";
      position: absolute;
      background-color: #39beff;
      height: 4px;
      width: 15px;
      border-radius: 0 0 2px 2px;
      bottom: -4px;
      left: 4.3px;
    }

    .rocket .fire {
      position: absolute;
      bottom: -20px;
      left: 50%;
      transform: translateX(-50%);
      width: 12px;
      height: 30px;
      background: radial-gradient(ellipse at center,
          #ffec85 0%,
          #ffae34 40%,
          #ec760c 70%,
          #cd4606 90%,
          rgba(0, 0, 0, 0) 100%);
      border-radius: 50%;
      animation: flame 0.3s infinite alternate;
      z-index: -1;
    }

    @keyframes flame {
      0% {
        transform: translateX(-50%) scaleY(1);
        opacity: 0.9;
      }

      100% {
        transform: translateX(-50%) scaleY(1.4);
        opacity: 0.5;
      }
    }

    .rocket .gas {
      position: absolute;
      bottom: -35px;
      left: 50%;
      transform: translateX(-50%);
      width: 10px;
      height: 10px;
      background: rgba(200, 200, 200, 0.6);
      border-radius: 50%;
      animation: gas 1.5s infinite ease-out;
    }

    .rocket .gas:nth-child(3) {
      animation-delay: 0.3s;
      left: 40%;
    }

    .rocket .gas:nth-child(4) {
      animation-delay: 0.6s;
      left: 60%;
    }

    @keyframes gas {
      0% {
        transform: translateX(-50%) scale(0.5);
        opacity: 0.8;
      }

      100% {
        transform: translateX(-50%) translateY(40px) scale(1.8);
        opacity: 0;
      }
    }

    .window {
      background-color: #151845;
      height: 10px;
      width: 10px;
      border: 2px solid #b8d2ec;
      border-radius: 50%;
      position: relative;
      top: 17px;
      left: 5px;
    }

    .curve {
      width: 100%;
      height: 100%;
      position: absolute;
      animation: rotate 10s linear infinite;
      fill: transparent;
    }

    @keyframes rotate {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    .curve text {
      letter-spacing: 20px;
      text-transform: uppercase;
      font:
        1.5em "Fira Sans",
        sans-serif;
      fill: #95d5ff;
      filter: none;
    }

    [data-theme="dark"] .curve text {
      filter: drop-shadow(0 2px 8px rgb(21, 117, 207));
    }

    .no-result {
      text-align: center;
      padding: 40px 20px;
      color: var(--text-light);
      font-size: 1.1rem;
    }

    .no-result::before {
      content: "Tablet";
      display: block;
      font-size: 3rem;
      margin-bottom: 16px;
      opacity: 0.3;
    }

    .footer {
      margin-top: 40px;
      text-align: center;
      color: var(--text-light);
      font-size: 0.85rem;
      opacity: 0.7;
    }

    .footer a {
      color: inherit;
      text-decoration: none;
    }

    .info a {
      color: #ff4500;
      /* Light mode */
      text-decoration: underline;
      font-weight: 600;
    }

    [data-theme="dark"] .info a {
      color: #ff5722 !important;
      /* Dark mode */
    }

    .info a:hover {
      color: #e03e00;
    }

    [data-theme="dark"] .info a:hover {
      color: #ff8a65 !important;
    }

    #priceRangeSection {
      animation: fadeIn 1s ease-out;
    }

    @media (max-width: 768px) {
      .card-content {
        flex-direction: column;
        gap: 16px;
        /* adds space between image and text */
      }

      .phone-image {
        order: -1;
        align-self: center;
        /* keeps image centered */
        margin-bottom: -35px;
      }

      .phone-image img {
        max-width: 120px;
        max-height: 150px;
      }

      .logo {
        max-width: 220px;
      }

      /* ---- PREVENT OVERLAP: Push text down so badge doesn't touch image ---- */
      .text-content {
        margin-top: 28px;
        /* creates gap under badge + "Tablet Speed" */
      }

      /* Badge & label stay centered and visible */
      .speed-badge {
        top: -22px;
        width: 44px;
        height: 44px;
        font-size: 0.95rem;
      }

      .speed-label {
        top: 26px;
        font-size: 0.72rem;
      }
    }

    /* @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    } */



    /* -------------------------------------------------
     SPEED BADGE ‚Äì orange circle + "Tablet Speed" label
     ------------------------------------------------- */
    .speed-badge {
      position: absolute;
      top: -24px;
      left: 50%;
      transform: translateX(-50%);
      width: 48px;
      height: 48px;
      background: linear-gradient(135deg, #ff511a, #ff2e00);
      color: #fff;
      font-weight: 800;
      font-size: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      box-shadow: none;
      z-index: 10;
      border: none;
      transition: transform 0.3s ease;
    }

    #results li:hover .speed-badge {
      transform: translateX(-50%) scale(1.1);
      box-shadow: none;
    }

    .speed-label {
      position: absolute;
      top: 30px;
      /* between badge and "Last Updated" */
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.75rem;
      color: var(--text-light);
      white-space: nowrap;
      font-weight: 600;
      background: rgba(255, 255, 255, 0.163);
      padding: 2px 8px;
      border-radius: 10px;
    }

    [data-theme="dark"] .speed-label {
      background: rgba(22, 22, 22, 0.064);
    }

    .card-wrapper {
      position: relative;
    }

    /* needed for absolute positioning */

    /* NEW: SORT BUTTONS (Price & Speed) */
    #sortControls {
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
      margin: 16px auto;
    }

    .sort-btn {
      padding: 10px 18px;
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 50px;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.95rem;
      transition: var(--transition);
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      color: var(--text);
    }

    .sort-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
      border-color: var(--accent);
    }

    .sort-btn.active {
      background: var(--accent);
      color: #fff;
      border-color: var(--accent);
    }

    /* Navigation Links */
    .nav-links {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .nav-links a {
      text-decoration: none;
    }



    /* === CHIPSET SELECT STYLES === */
    .chipset-select {
      padding: 10px 16px;
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 50px;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      transition: var(--transition);
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      appearance: none;
      -webkit-appearance: none;
      padding-right: 32px;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6,9 12,15 18,9'%3E%3C/polyline%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;

      color: #fe5218;
    }

    .chipset-select:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 4px rgba(255, 69, 0, 0.2);
    }

    .chipset-select option {
      background: #fe5218;
      color: white;
    }

    .chipset-select.selected {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }

    /* FILTERABLE VALUE STYLES */
    .filterable-value {
      cursor: pointer;
      text-decoration: none;
      transition: color 0.2s ease;
      border-bottom: 1px dashed rgba(150, 150, 150, 0.4);
    }

    .filterable-value:hover {
      color: var(--accent) !important;
      text-decoration: none;
      border-bottom-color: var(--accent);
    }
  </style>

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-9N7K2L5H8M"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());
    gtag("config", "G-9N7K2L5H8M");
  </script>
</head>

<body>
  <div class="theme-toggle" id="themeToggle"></div>

  <!-- Hidden H1 for SEO -->
  <!-- <h1 style="position:absolute; left:-9999px; width:1px; height:1px;">KotoTaka ‚Äì Cheapest Tablet Prices in Bangladesh</h1> -->

  <div style="text-align: center; margin-bottom: 10px">
    <img src="https://i.ibb.co.com/RT56M0kK/KotoTaka.png" alt="Tablet Price Finder Logo" class="logo" />
  </div>

  <div class="nav-links">
    <a href="../index.html" class="sort-btn">Mobile</a>
    <a href="#" class="sort-btn active">Tablet</a>
  </div>

  <div class="search-container">
    <input type="text" id="search" placeholder="üîé ‡¶Æ‡¶æ‡¶Æ‡¶æ, ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡¶≤‡ßá‡¶ü ‡¶ñ‡ßÅ‡¶Å‡¶ú‡¶õ‡ßã ‡¶®‡¶æ‡¶ï‡¶ø? ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶ï‡¶∞‡ßã‡•§" />
    <span id="clearSearch" class="clear-btn" title="Clear">‡¶ò‡¶∑‡¶æ ‡¶¶‡ßá‡¶ì </span>
    <div id="autocomplete"></div>
  </div>

  <div id="brandCards"></div>

  <div id="priceRangeSection" style="display: none">
    <h3 class="price-range-title">
      ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶Ç‡¶ï ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶™‡¶∞‡¶æ‡¶Æ‡¶∞‡ßç‡¶∂ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡¶Ø‡¶º‡ßÄ ‡¶∞‡ßá‡¶û‡ßç‡¶ú ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßã‡•§
    </h3>
    <div id="priceRangeCards"></div>
  </div>

  <!-- REPLACED: old sortBtn -->
  <div id="sortControls" style="display: none">
    <button id="sortPriceBtn" class="sort-btn active">
      ‡¶∏‡¶¨‡¶ö‡ßá‡ßü‡ßá ‡¶∏‡¶∏‡ßç‡¶§‡¶æ ‡¶Ü‡¶ó‡ßá
    </button>
    <button id="sortSpeedBtn" class="sort-btn">‡¶™‡¶æ‡¶∞‡¶´‡¶∞‡ßç‡¶Æ‡ßá‡¶®‡ßç‡¶∏‡ßá ‡¶∏‡ßá‡¶∞‡¶æ ‡¶Ü‡¶ó‡ßá</button>
  </div>

  <!-- RESULTS WITH PAGINATION -->
  <div id="moon-loader" class="container">
    <div class="moon">
      <div class="crater crater1"></div>
      <div class="crater crater2"></div>
      <div class="crater crater3"></div>
      <div class="crater crater4"></div>
      <div class="crater crater5"></div>
      <div class="shadow"></div>
      <div class="eye eye-l"></div>
      <div class="eye eye-r"></div>
      <div class="mouth"></div>
      <div class="blush blush1"></div>
      <div class="blush blush2"></div>
    </div>

    <div class="orbit">
      <div class="rocket">
        <div class="window"></div>
        <div class="fire"></div>
        <div class="gas"></div>
        <div class="gas"></div>
        <div class="gas"></div>
        <div class="gas"></div>
        <div class="gas"></div>
        <div class="gas"></div>
        <div class="gas"></div>
      </div>
    </div>
    <div class="curve">
      <svg viewBox="0 0 500 500">
        <path id="loading" d="M73.2,148.6c4-6.1,65.5-96.8,178.6-95.6c111.3,1.2,170.8,90.3,175.1,97"></path>
        <text width="500">
          <textPath xlink:href="#loading">kototaka tablet</textPath>
        </text>
      </svg>
    </div>
  </div>
  <ul id="results"></ul>
  <div id="pagination" style="
        display: none;
        justify-content: center;
        margin: 20px 0;
        gap: 10px;
        flex-wrap: wrap;
      "></div>

  <!-- FAQ SECTION -->
  <div id="faqSection" class="faq-container">
    <div class="faq-bar" id="faqBar">
      <span>‡¶™‡ßç‡¶∞‡¶æ‡¶Ø‡¶º‡¶á ‡¶Æ‡¶æ‡¶®‡ßÅ‡¶∑ ‡¶Ø‡ßá ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡¶ó‡ßÅ‡¶≤‡ßã ‡¶ï‡¶∞‡¶§‡ßá ‡¶ï‡¶∞‡¶§‡ßá ‡¶ï‡ßç‡¶≤‡¶æ‡¶®‡ßç‡¶§ ‡¶ï‡¶∞‡ßá ‡¶´‡ßá‡¶≤‡ßá</span>
      <svg class="faq-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="2">
        <polyline points="6,9 12,15 18,9"></polyline>
      </svg>
    </div>
    <div class="faq-content" id="faqContent">
      <div class="faq-item">
        <div class="faq-question">‡¶ï‡¶§‡ßã‡¶ü‡¶æ‡¶ï‡¶æ ‡¶è‡¶∞ ‡¶ï‡¶æ‡¶ú ‡¶ï‡ßÄ??</div>
        <div class="faq-answer">
          ‡¶∏‡¶π‡¶ú‡¶≠‡¶æ‡¶¨‡ßá ‡¶¨‡¶≤‡¶≤‡ßá, ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶¶‡¶ø‡¶á ‡¶ï‡ßã‡¶® ‡¶¶‡ßã‡¶ï‡¶æ‡¶®‡ßá ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡¶≤‡ßá‡¶ü‡¶ü‡¶æ ‡¶∏‡¶¨‡¶ö‡ßá‡ßü‡ßá ‡¶ï‡¶Æ ‡¶¶‡¶æ‡¶Æ‡ßá
          ‡¶Æ‡¶ø‡¶≤‡¶¨‡ßá‡•§ ‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶Ø‡ßá‡¶® ‡¶¶‡¶æ‡¶Æ‡ßá ‡¶†‡¶ï‡ßã ‡¶®‡¶æ, ‡¶∏‡ßá‡¶ü‡¶æ‡¶á ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ï‡¶æ‡¶ú‡•§ ‡¶¶‡¶æ‡¶Æ‡¶ó‡ßÅ‡¶≤‡ßã ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶¶‡¶ø‡¶®
          ‡¶ü‡¶æ‡¶ü‡¶ï‡¶æ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü!
        </div>
      </div>
      <div class="faq-item">
        <div class="faq-question">‡¶¶‡¶æ‡¶Æ ‡¶ï‡¶§‡¶ü‡ßÅ‡¶ï‡ßÅ ‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡¶æ‡¶∏‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø?</div>
        <div class="faq-answer">
          ‡¶¶‡ßã‡¶ï‡¶æ‡¶® ‡¶•‡ßá‡¶ï‡ßá‡¶á ‡¶¶‡¶æ‡¶Æ ‡¶§‡ßÅ‡¶≤‡¶ø, ‡¶Æ‡¶æ‡¶®‡ßá ‡¶è‡¶ï‡¶¶‡¶Æ ‡¶Æ‡¶æ‡¶†‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡ßü‡ßá‡¶∞ ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü‡¶ø‡¶Ç! ‡¶§‡¶¨‡ßÅ‡¶ì ‡¶ï‡ßá‡¶®‡¶æ‡¶∞
          ‡¶Ü‡¶ó‡ßá ‡¶¶‡ßã‡¶ï‡¶æ‡¶®‡ßá ‡¶è‡¶ï‡¶¨‡¶æ‡¶∞ ‡¶ú‡ßá‡¶®‡ßá ‡¶®‡ßá‡¶ì‡ßü‡¶æ‡¶á ‡¶¨‡ßÅ‡¶¶‡ßç‡¶ß‡¶ø‡¶Æ‡¶æ‡¶®‡ßá‡¶∞ ‡¶ï‡¶æ‡¶ú‡•§ ‡¶∂‡ßá‡¶∑ ‡¶ï‡¶•‡¶æ ‡¶¶‡ßã‡¶ï‡¶æ‡¶®‡ßá‡¶∞‡¶á‡•§
        </div>
      </div>
      <div class="faq-item">
        <div class="faq-question">‡¶ì‡ßü‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶ü‡¶ø ‡¶™‡¶æ‡¶¨‡ßã ‡¶®‡¶æ‡¶ï‡¶ø ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶Ü‡¶∂‡¶æ?</div>
        <div class="faq-answer">
          ‡¶Ø‡ßá‡¶ñ‡¶æ‡¶®‡ßá ‡¶ì‡ßü‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶ü‡¶ø ‡¶Ü‡¶õ‡ßá, ‡¶∏‡ßá‡¶ñ‡¶æ‡¶®‡ßá ‡¶™‡¶∞‡¶ø‡¶∑‡ßç‡¶ï‡¶æ‡¶∞ ‡¶â‡¶≤‡ßç‡¶≤‡ßá‡¶ñ ‡¶•‡¶æ‡¶ï‡ßá‡•§ ‡¶¨‡ßá‡¶∂‡¶ø‡¶∞‡¶≠‡¶æ‡¶ó ‡¶¶‡ßã‡¶ï‡¶æ‡¶®
          ‡¶Ö‡¶®‡ßç‡¶§‡¶§ ‡¶è‡¶ï ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π‡ßá‡¶∞ ‡¶∂‡¶æ‡¶®‡ßç‡¶§‡¶ø ‡¶¶‡ßá‡ßü‡•§
        </div>
      </div>
      <div class="faq-item">
        <div class="faq-question">‡¶è‡¶§ ‡¶¶‡ßã‡¶ï‡¶æ‡¶®, ‡¶ï‡ßã‡¶®‡¶ü‡¶æ ‡¶•‡ßá‡¶ï‡ßá ‡¶ï‡¶ø‡¶®‡¶¨?</div>
        <div class="faq-answer">
          ‡¶¶‡ßÅ‡¶á‡¶ü‡¶æ ‡¶ú‡¶ø‡¶®‡¶ø‡¶∏ ‡¶¶‡ßá‡¶ñ‡ßã - ‡¶¶‡¶æ‡¶Æ ‡¶Ü‡¶∞ ‡¶¶‡ßÇ‡¶∞‡¶§‡ßç‡¶¨‡•§ ‡¶Ø‡ßá ‡¶¶‡ßã‡¶ï‡¶æ‡¶® ‡¶ï‡¶Æ‡ßá ‡¶¶‡¶ø‡¶ö‡ßç‡¶õ‡ßá ‡¶Ü‡¶∞ ‡¶ï‡¶æ‡¶õ‡ßá‡¶á ‡¶Ü‡¶õ‡ßá,
          ‡¶∏‡ßá‡¶á‡¶ü‡¶æ‡¶á ‡¶¨‡¶ø‡¶ú‡ßü‡ßÄ!
        </div>
      </div>
      <div class="faq-item">
        <div class="faq-question">Tablet Speed ‡¶ü‡¶æ ‡¶¨‡ßÅ‡¶ù‡¶æ‡ßü ‡¶¶‡ßá‡¶ì ‡¶§‡ßã ‡¶Æ‡¶æ‡¶Æ‡¶æ‡•§</div>
        <div class="faq-answer">
          ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡¶≤‡ßá‡¶ü ‡¶è‡¶∞ ‡¶∏‡ßç‡¶™‡¶ø‡¶° ‡¶∏‡ßç‡¶ï‡ßã‡¶∞ ‡¶π‡¶≤‡ßã ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶Ø‡¶æ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶Ø‡¶º ‡¶è‡¶á ‡¶Ø‡ßÅ‡¶ó‡ßá ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡¶≤‡ßá‡¶ü
          ‡¶ï‡¶§ ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§ ‡¶Ü‡¶Æ‡¶∞‡¶æ AnTuTu, Geekbench ‡¶Ü‡¶∞ 3DMark ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá
          AI ‡¶¶‡¶ø‡ßü‡ßá ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶è‡¶ï‡¶ü‡¶æ ‡¶∏‡ßç‡¶ï‡ßã‡¶∞ ‡¶¨‡ßá‡¶∞ ‡¶ï‡¶∞‡ßá‡¶õ‡¶ø, ‡¶§‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ø‡¶æ‡¶∞‡¶æ ‡¶≠‡¶ø‡¶®‡ßç‡¶® ‡¶ö‡¶ø‡¶™ ‡¶è‡¶∞
          ‡¶®‡¶æ‡¶Æ ‡¶¶‡ßá‡¶ñ‡ßá ‡¶¨‡ßÅ‡¶ù‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá ‡¶®‡¶æ ‡¶Ø‡ßá ‡¶è‡¶ü‡¶æ ‡¶≠‡¶æ‡¶≤‡ßã ‡¶®‡¶æ‡¶ï‡¶ø ‡¶î‡¶ü‡¶æ ‡¶≠‡¶æ‡¶≤‡ßã‡•§ ‡¶¶‡ßá‡¶ñ‡ßã ‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡¶≤‡ßá‡¶ü
          ‡¶è ‡¶ï‡ßÄ ‡¶ï‡¶∞‡¶õ: ‡¶π‡ßá‡¶≠‡¶ø ‡¶ó‡ßá‡¶Æ‡¶ø‡¶Ç = ‡ßÆ‡ß¶+, ‡¶Æ‡ßã‡¶ü‡¶æ‡¶Æ‡ßÅ‡¶ü‡¶ø ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶™‡¶æ‡¶¨‡¶ú‡¶ø ‡¶ó‡ßá‡¶Æ‡¶ø‡¶Ç = ‡ß™‡ß¶+,
          ‡¶Æ‡¶ø‡¶°‡¶ø‡¶Ø‡¶º‡¶æ‡¶Æ ‡¶ï‡¶æ‡¶ú = ‡ß©‡ß¶+, ‡¶è‡¶Æ‡¶®‡¶ø ‡¶∏‡ßã‡¶∂‡ßç‡¶Ø‡¶æ‡¶≤ ‡¶Æ‡¶ø‡¶°‡¶ø‡¶Ø‡¶º‡¶æ = ‡ß®‡ß´+, ‡¶≤‡ßç‡¶Ø‡¶æ‡¶ó + ‡¶á‡¶â‡¶ü‡¶ø‡¶â‡¶¨ =
          ‡ßß‡ß´+‡•§
        </div>
      </div>
    </div>
  </div>

  <footer class="footer" style="text-decoration: none; color: #55555587">
    <p>
      Programming Hero practice project by
      <a href="https://www.facebook.com/arefinbee" target="_blank">Arefin Bashar Arif</a>. Contributed by
      <a href="https://www.facebook.com/rakibtnt69" target="_blank">Rakib Islam</a>,
      <a href="https://www.facebook.com/saadh393" target="_blank">Nasimul Hasan</a>
      and
      <a href="https://www.linkedin.com/in/naimurhasanrwd/" target="_blank">Naimur Hasan</a>.
    </p>
  </footer>

  <script>
    // DYNAMIC SEO META UPDATE
    function updatePageMeta(titleSuffix, description) {
      document.title = `${titleSuffix} ‚Äì KotoTaka`;
      let desc = document.querySelector('meta[name="description"]');
      if (desc) desc.content = description;
      else {
        desc = document.createElement("meta");
        desc.name = "description";
        desc.content = description;
        document.head.appendChild(desc);
      }
    }

    // Theme Toggle
    const themeToggle = document.getElementById("themeToggle");
    const setTheme = (theme) => {
      document.documentElement.setAttribute("data-theme", theme);
      localStorage.setItem("KotoTaka-theme", theme);
    };
    themeToggle.addEventListener("click", () => {
      const current =
        document.documentElement.getAttribute("data-theme") || "light";
      setTheme(current === "dark" ? "light" : "dark");
    });
    const savedTheme = localStorage.getItem("KotoTaka-theme");
    if (savedTheme) setTheme(savedTheme);
    else if (window.matchMedia("(prefers-color-scheme: dark)").matches)
      setTheme("dark");

    // Old skeleton loader function removed

    const sheetCsvUrl =
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vRao5emNlhfJ9Mg3lKPriReMh_Qbx89bzDUzVMP1eFJEVEkzsmEHYvecZ_KhIwjvUiHYhLLw_m63TyL/pub?output=csv";
    let tablets = [],
      brands = [],
      currentBrand = null,
      currentPriceRange = null;
    let sortPriceMode = "asc",
      sortSpeedMode = "asc";

    // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
    // MOBILE-ONLY SCROLL JANK FIX (Safe & Working)
    // Only wrap renderBrandCards ‚Äî NOT price range
    // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
    if (window.innerWidth <= 768) {
      let isRendering = false;
      const safeRender = (fn) => {
        if (isRendering) return;
        isRendering = true;
        requestAnimationFrame(() => {
          fn();
          isRendering = false;
        });
      };

      // Only wrap brand cards (dynamic)
      const originalRenderBrand = renderBrandCards;
      renderBrandCards = function (...args) {
        safeRender(() => originalRenderBrand(...args));
      };

      // DO NOT wrap renderPriceRangeCards ‚Äî it breaks!
      // Leave it untouched
    }

    const brandMergeMap = {
      Motorola: ["Motorola", "Motorola Edge"],
      Xiaomi: ["Xiaomi", "Xiaomi Poco", "Xiaomi Redmi"],
    };

    function parseCSV(text) {
      const lines = text.trim().split("\n");
      const headers = lines.shift().split(",");
      return lines.map((line) => {
        const values = [];
        let current = "";
        let inQuotes = false;
        for (let char of line) {
          if (char === '"' || char === "'") inQuotes = !inQuotes;
          else if (char === "," && !inQuotes) {
            values.push(current.trim());
            current = "";
          } else current += char;
        }
        values.push(current.trim());
        const obj = {};
        headers.forEach((h, i) => (obj[h.trim()] = values[i] || ""));
        return obj;
      });
    }

    fetch(sheetCsvUrl)
      .then((res) => res.text())
      .then((csvText) => {
        const data = parseCSV(csvText);
        tablets = data
          .map((r) => {
            const brand = r.BRANDS?.trim() || "";
            const model = r.MODEL?.trim() || "";
            const price = r["CHEAPEST PRICE"] || "N/A";
            const shop = r.SHOP || r.SOURCE || "N/A"; // Fallback if SHOP missing
            const size = r.SIZE || "";
            const ramStorage = r["RAM/STORAGE"] || "";
            const panel = r.PANEL || ""; // Assuming "PANEL" from your list
            const variant = r.VARIANT || "";
            const date = r.DATE || "N/A";
            const sim = r.SIM || "";
            const warranty = r.WARRANTY || "";
            const sourceUrl = r.SOURCE
              ? r.SOURCE.trim().replace(/^"|"$/g, "")
              : "";
            const region = r.REGION || "";
            const score = r.SCORE || "";
            const refreshRate = r["REFRESH RATE"] || "";
            const speakers = r.SPEAKERS || "";
            const stylus = r.STYLUS || "";
            const imageUrl = r.IMAGE ? r.IMAGE.trim() : "";

            const searchWords = (brand + " " + model)
              .toLowerCase()
              .split(/\s+/);
            return {
              brand,
              model,
              name: (brand + " " + model).trim(),
              cleanName:
                brand === "Extra"
                  ? model.trim()
                  : (brand + " " + model).trim(),
              searchWords,
              isNotInBD:
                (r.SHOP || "").trim().toUpperCase() ===
                "NOT AVAILABLE IN BD YET",
              price,
              shop,
              info: {
                size,
                ramStorage,
                panel,
                variant,
                sim,
                region,
                date,
                source: sourceUrl,
                warranty,
                score,
                refreshRate,
                speakers,
                stylus,
                image: imageUrl,
              },
            };
          })
          .filter((t) => t.brand && t.model);

        function getCleanName(phone) {
          if (phone.brand === "Extra") {
            return phone.model.trim(); // Only model name
          }
          return phone.name.trim(); // Normal: Brand + Series + Model
        }

        // Brand Counts
        const brandCounts = {};
        tablets.forEach((t) => {
          let key = t.brand;
          for (const [merged, originals] of Object.entries(brandMergeMap)) {
            if (originals.includes(t.brand)) {
              key = merged;
              break;
            }
          }
          brandCounts[key] = (brandCounts[key] || 0) + 1;
        });

        // === FILTER OUT "Extra" BRAND FROM BRAND LIST ===
        const brandSet = new Set(
          tablets.map((t) => t.brand).filter((b) => b && b.trim() !== "Extra")
        );

        const mergedBrands = [];
        Object.keys(brandMergeMap).forEach((key) => {
          if (brandMergeMap[key].some((b) => brandSet.has(b)))
            mergedBrands.push(key);
        });
        brandSet.forEach((b) => {
          if (!Object.values(brandMergeMap).flat().includes(b))
            mergedBrands.push(b);
        });

        brands = mergedBrands.sort((a, b) => a.localeCompare(b));
        document.getElementById("moon-loader").style.display = "none";
        renderBrandCards(brandCounts);
        renderPriceRangeCards();
        document.getElementById("priceRangeSection").style.display = "block";
        document.getElementById("results").innerHTML = "";
      })
      .catch((err) => {
        console.error("Error:", err);
        document.getElementById("moon-loader").style.display = "none";
        document.getElementById("results").innerHTML =
          '<li class="no-result">Failed to load data.</li>';
      });

    const searchInput = document.getElementById("search");
    const clearBtn = document.getElementById("clearSearch");
    const autocompleteDiv = document.getElementById("autocomplete");
    const results = document.getElementById("results");
    const brandCardsDiv = document.getElementById("brandCards");
    const priceRangeCardsDiv = document.getElementById("priceRangeCards");
    const sortControls = document.getElementById("sortControls");
    const sortPriceBtn = document.getElementById("sortPriceBtn");
    const sortSpeedBtn = document.getElementById("sortSpeedBtn");

    function buildVariantButtons(current, group) {
      const others = group.filter((v) => v !== current);
      if (others.length === 0) return "";

      function formatPrice(p) {
        const num = parseInt(p.replace(/\D/g, ""), 10) || 0;
        if (num >= 100000) return `‡ß≥${Math.round(num / 1000)}K`;
        if (num >= 10000)
          return `‡ß≥${(num / 1000).toFixed(1).replace(".0", "")}K`;
        return `‡ß≥${num}`;
      }

      return others
        .map((v) => {
          const parts = [];
          if (v.info.size && v.info.size !== current.info.size)
            parts.push(v.info.size.trim() + " Inch");
          if (v.info.ramStorage !== current.info.ramStorage)
            parts.push(v.info.ramStorage);
          if (v.info.sim && v.info.sim !== current.info.sim)
            parts.push(v.info.sim);
          if (v.info.variant && v.info.variant !== current.info.variant)
            parts.push(v.info.variant);
          if (v.info.region && v.info.region !== current.info.region)
            parts.push(v.info.region);

          const label =
            parts.length > 0
              ? parts.join(" ‚Ä¢ ") + " ‚Ä¢ " + formatPrice(v.price)
              : formatPrice(v.price);
          const key = `${v.info.size || ""}|${v.info.ramStorage}|${v.info.sim || ""
            }|${v.info.variant || ""}|${v.info.region || ""}`;

          return `<button class="variant-btn" data-variant-id="${key}">${label}</button>`;
        })
        .join("");
    }

    function renderBrandCards(counts) {
      brandCardsDiv.innerHTML = "";
      brands.forEach((brand) => {
        if (!brand) return;
        const card = document.createElement("div");
        card.classList.add("brand-card");
        const count = counts[brand] || 0;
        card.innerHTML = `${brand} <span class="brand-badge">${count}</span>`;
        card.addEventListener("click", () => {
          currentBrand = brand;
          currentPriceRange = null;
          showBrand(brand);
          highlightSelectedCard(card);
          document
            .querySelectorAll(".price-card")
            .forEach((c) => c.classList.remove("selected"));
          chipsetSelect.selectedIndex = 0;
          chipsetSelect.classList.remove("selected");
          updatePageMeta(
            `${brand} Tablets`,
            `Cheapest ${brand} tablets in Bangladesh from local shops. Updated daily.`
          );
        });
        brandCardsDiv.appendChild(card);
      });

      // CHIPSET DROPDOWN (using your VARIANT column as chipset)
      const allChipsets = [
        ...new Set(tablets.map((t) => t.info.variant).filter(Boolean)),
      ].sort();

      const chipsetSelect = document.createElement("select");
      chipsetSelect.className = "brand-card chipset-select";
      chipsetSelect.innerHTML = `
    <option value="" disabled selected>Chipset</option>
    ${allChipsets
          .map((chip) => `<option value="${chip}">${chip}</option>`)
          .join("")}
  `;

      chipsetSelect.addEventListener("change", function () {
        const selectedChipset = this.value;
        if (!selectedChipset) return;

        currentBrand = null;
        currentPriceRange = null;
        document
          .querySelectorAll(".brand-card, .price-card")
          .forEach((c) => c.classList.remove("selected"));
        this.classList.add("selected");

        const filtered = tablets.filter(
          (t) => t.info.variant === selectedChipset
        );
        showAllVariants(applySort(filtered));
        sortControls.style.display = "flex";

        updatePageMeta(
          `${selectedChipset} Tablets`,
          `Best tablets with ${selectedChipset} chipset in Bangladesh ‚Äì lowest prices.`
        );
      });

      brandCardsDiv.appendChild(chipsetSelect);
    }

    function renderPriceRangeCards() {
      const ranges = [
        [5000, 10000],
        [10000, 20000],
        [20000, 30000],
        [30000, 40000],
        [40000, 50000],
        [50000, 60000],
        [60000, 80000],
        [80000, 100000],
        [100000, Infinity],
      ];

      priceRangeCardsDiv.innerHTML = "";
      ranges.forEach(([min, max]) => {
        const label =
          max === Infinity ? "100K+" : `${min / 1000}K-${max / 1000}K`;
        const card = document.createElement("div");
        card.className = "price-card";
        card.textContent = label;
        card.dataset.min = min;
        card.dataset.max = max;
        card.addEventListener("click", () => {
          currentPriceRange = [min, max];
          currentBrand = null;
          document
            .querySelectorAll(".price-card")
            .forEach((c) => c.classList.remove("selected"));
          card.classList.add("selected");
          document
            .querySelectorAll(".brand-card")
            .forEach((c) => c.classList.remove("selected"));
          filterByPrice(min, max);
          updatePageMeta(
            `${label} Tablets`,
            `Tablets between ${label} in Bangladesh ‚Äì lowest prices from local shops.`
          );
        });
        priceRangeCardsDiv.appendChild(card);
      });
    }

    function highlightSelectedCard(selectedCard) {
      document
        .querySelectorAll(".brand-card")
        .forEach((c) => c.classList.remove("selected"));
      selectedCard.classList.add("selected");
    }

    function highlightDiffs(variants) {
      const fields = [
        "price",
        "shop",
        "size",
        "ramStorage",
        "panel",
        "variant",
        "sim",
        "region",
      ];
      const diffs = {};
      fields.forEach((f) => {
        const values = variants.map((v) => (f in v.info ? v.info[f] : v[f]));
        diffs[f] = new Set(values).size > 1;
      });
      return diffs;
    }

    let currentPage = 1;
    const resultsPerPage = 10;

    function showAllVariants(variants) {
      if (!variants.length) {
        results.innerHTML =
          '<li class="no-result">‡¶ï‡ßã‡¶®‡ßã ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡¶≤‡ßá‡¶ü ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§</li>';
        document.getElementById("pagination").style.display = "none";
        return;
      }

      // Group by tablet name
      const tabletMap = {};
      // Put "NOT AVAILABLE" tablets at the very bottom
      const normal = variants.filter(
        (t) => t.shop.trim().toUpperCase() !== "NOT AVAILABLE IN BD YET"
      );
      const unavailable = variants.filter(
        (t) => t.shop.trim().toUpperCase() === "NOT AVAILABLE IN BD YET"
      );
      const sortedList = [...normal, ...unavailable];

      sortedList.forEach((tablet) => {
        const key = tablet.name;
        if (!tabletMap[key]) tabletMap[key] = [];
        tabletMap[key].push(tablet);
      });

      const groupedTablets = Object.values(tabletMap);
      const RESULTS_PER_PAGE = 10;
      let currentPage = 1;
      const totalPages = Math.ceil(groupedTablets.length / RESULTS_PER_PAGE);

      function renderPage(page) {
        results.innerHTML = "";
        const start = (page - 1) * RESULTS_PER_PAGE;
        const end = start + RESULTS_PER_PAGE;
        const pageItems = groupedTablets.slice(start, end);

        pageItems.forEach((group) => {
          const defaultVariant = group[0];
          const li = document.createElement("li");
          li.className = "card-wrapper variant-card";

          // === BUILD OTHER VARIANT BUTTONS ===
          // === UPDATED: BUILD VARIANT BUTTONS (Now includes SIZE + "Inch") ===

          const sourceHTML = defaultVariant.info.source?.startsWith("http")
            ? `üîó Source: <a href="${defaultVariant.info.source}" target="_blank" class="highlight">LINK</a><br>`
            : "";

          // Helper to create filterable span
          const filterSpan = (text, type, value) => {
            return `<span class="filterable-value" data-filter-type="${type}" data-filter-value="${value}">${text}</span>`;
          };

          const score = defaultVariant.info.score?.trim();

          li.innerHTML = `
              ${score
              ? `<div class="speed-badge">${score}</div><div class="speed-label">‡¶â‡¶™‡¶∞‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞‡¶ü‡¶æ ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡ßá‡¶∞ ‡¶∏‡ßç‡¶™‡¶ø‡¶° ‡¶¨‡ßã‡¶ù‡¶æ‡¶Ø‡¶º</div>`
              : ""
            }
              <div class="card-content">
                <div class="text-content">
                  <strong class="phone-title">${defaultVariant.cleanName}${defaultVariant.info.sim ? ` <span style="opacity: 0.3; font-size: 16px;">(${defaultVariant.info.sim})</span>` : ""}</strong>
                  ${group.length > 1
              ? `<div class="variant-buttons">${buildVariantButtons(
                defaultVariant,
                group
              )}</div>`
              : ""
            } 
                  ${defaultVariant.isNotInBD
              ? '<div style="color:#d32f2f;font-weight:700;font-size:1.1rem;margin-top:8px;">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂‡ßá ‡¶Ü‡¶∏‡ßá ‡¶®‡¶ø ‡¶è‡¶ñ‡ßã‡¶®‡ßã</div>'
              : `<div class="shop">
  <span class="price-tag">‡ß≥${defaultVariant.price}</span>
  ${defaultVariant.shop.split(',').map(s => `<span class="shop-pill">üõí ${s.trim()}</span>`).join('')}
</div>`
            }
  
                  <div class="info">
                    ${(() => {
              const parts = [];
              if (defaultVariant.info.size) {
                parts.push(filterSpan(defaultVariant.info.size + "-inch", "size", defaultVariant.info.size));
              }
              if (defaultVariant.info.panel) {
                parts.push(filterSpan(defaultVariant.info.panel, "panel", defaultVariant.info.panel));
              }
              if (defaultVariant.info.refreshRate) {
                parts.push(filterSpan(defaultVariant.info.refreshRate, "refreshRate", defaultVariant.info.refreshRate));
              }
              return parts.length
                ? `üì∫ Display: ${parts.join(" ")}<br>`
                : "";
            })()}
‚öôÔ∏è RAM/Storage: ${filterSpan(defaultVariant.info.ramStorage, "ramStorage", defaultVariant.info.ramStorage)}<br>
üß† Chipset: ${filterSpan(defaultVariant.info.variant || "N/A", "variant", defaultVariant.info.variant)}<br>
                    ${defaultVariant.info.speakers
              ? `üîä Speakers: <span class="speakers">${filterSpan(defaultVariant.info.speakers, "speakers", defaultVariant.info.speakers)}</span><br>`
              : ""
            }
                    ${defaultVariant.info.stylus
              ? `‚úèÔ∏è Stylus: <span class="stylus">${filterSpan(defaultVariant.info.stylus, "stylus", defaultVariant.info.stylus)}</span><br>`
              : ""
            }
                    ${defaultVariant.info.region?.trim()
              ? `üåé Region: ${filterSpan(defaultVariant.info.region, "region", defaultVariant.info.region)}<br>`
              : ""
            }

${sourceHTML}


${(defaultVariant.brand === 'Apple' || defaultVariant.info.warranty?.trim())
              ? `üõ°Ô∏è Warranty: ${defaultVariant.brand === 'Apple'
                ? "Apple 1 year parts warranty"
                : defaultVariant.info.warranty.trim()}<br>`
              : ""
            }
                  </div>
                </div>
                ${defaultVariant.info.image
              ? `<div class="phone-image"><img data-src="${defaultVariant.info.image}" alt="${defaultVariant.name}" loading="lazy"></div>`
              : '<div class="phone-image"><div style="width:90px;height:130px;background:#eee;border-radius:12px"></div></div>'
            }
              </div>
              <div class="footer-info">Last Updated: ${formatDate(
              defaultVariant.info.date
            )}</div>
            `;

          // === EVENT DELEGATION: ONE LISTENER FOR ALL BUTTONS ===
          li.addEventListener("click", (e) => {
            const btn = e.target.closest(".variant-btn");
            if (!btn) return;

            const variantKey = btn.dataset.variantId;
            // Find this line and replace it:
            const selected = group.find(
              (v) =>
                `${v.info.size || ""}|${v.info.ramStorage || ""}|${v.info.sim || ""
                }|${v.info.variant || ""}|${v.info.region || ""}` ===
                variantKey
            );
            if (!selected) return;

            // Update card
            const phoneTitle = li.querySelector(".phone-title");
            if (phoneTitle) {
              phoneTitle.innerHTML = `${selected.cleanName}${selected.info.sim ? ` <span style="opacity: 0.3; font-size: 16px;">(${selected.info.sim})</span>` : ""}`;
            }

            const priceTag = li.querySelector(".price-tag");
            if (priceTag) priceTag.textContent = `‡ß≥${selected.price}`;

            const shopDiv = li.querySelector(".shop");
            if (shopDiv && selected.shop) {
              // Split shops by comma
              const shopPills = selected.shop.split(',').map(s => `<span class="shop-pill">üõí ${s.trim()}</span>`).join('');
              // Preserve price tag
              shopDiv.innerHTML = `<span class="price-tag">‡ß≥${selected.price}</span>${shopPills}`;
            }

            const sourceLink = selected.info.source?.startsWith("http")
              ? `<a href="${selected.info.source}" target="_blank" class="highlight">LINK</a>`
              : "N/A";
            const sourceLinkHTML = selected.info.source?.startsWith("http")
              ? `üîó Source: <a href="${selected.info.source}" target="_blank" class="highlight">LINK</a><br>`
              : "";
            const warrantyHTML = selected.brand === 'Apple'
              ? `üõ°Ô∏è Warranty: <span class="warranty">Apple 1 year parts warranty</span><br>`
              : (selected.info.warranty?.trim()
                ? `üõ°Ô∏è Warranty: <span class="warranty">${selected.info.warranty}</span><br>`
                : `üõ°Ô∏è Warranty: <span class="warranty" style="color: var(--text-light); font-style: italic;">Usually 1-year official</span><br>`);

            li.querySelector(".info").innerHTML = `<div class="info">
                    ${(() => {
                const parts = [];
                if (selected.info.size)
                  parts.push(filterSpan(selected.info.size + "-inch", "size", selected.info.size));
                if (selected.info.panel)
                  parts.push(filterSpan(selected.info.panel, "panel", selected.info.panel));
                if (selected.info.refreshRate)
                  parts.push(filterSpan(selected.info.refreshRate, "refreshRate", selected.info.refreshRate));
                return parts.length
                  ? `üì∫ Display: ${parts.join(" ")}<br>`
                  : "";
              })()}
‚öôÔ∏è RAM/Storage: ${filterSpan(selected.info.ramStorage, "ramStorage", selected.info.ramStorage)}<br>
üß† Chipset: ${filterSpan(selected.info.variant || "N/A", "variant", selected.info.variant)}<br>
                    ${selected.info.speakers
                ? `üîä Speakers: <span class="speakers">${filterSpan(selected.info.speakers, "speakers", selected.info.speakers)}</span><br>`
                : ""
              }
                    ${selected.info.stylus
                ? `‚úèÔ∏è Stylus: <span class="stylus">${filterSpan(selected.info.stylus, "stylus", selected.info.stylus)}</span><br>`
                : ""
              }
                    ${selected.info.region?.trim()
                ? `üåé Region: ${filterSpan(selected.info.region, "region", selected.info.region)}<br>`
                : ""
              }

${sourceHTML}

${warrantyHTML}
                  </div>`.trim();

            // Update image
            const img = li.querySelector(".phone-image img");
            if (img && selected.info.image) {
              img.dataset.src = selected.info.image;
              img.src = selected.info.image;
            }

            // Update speed badge
            const badge = li.querySelector(".speed-badge");
            const label = li.querySelector(".speed-label");
            const newScore = selected.info.score?.trim();
            if (newScore && badge) {
              badge.textContent = newScore;
              badge.style.display = "flex";
              label.style.display = "block";
            } else if (badge) {
              badge.style.display = "none";
              label.style.display = "none";
            }

            // === REBUILD BUTTONS (exclude current) ===
            // REBUILD BUTTONS ‚Äî now always shows the previous variant too
            if (group.length > 1) {
              let container = li.querySelector(".variant-buttons");
              if (!container) {
                container = document.createElement("div");
                container.className = "variant-buttons";
                li.querySelector(".text-content").insertBefore(
                  container,
                  li.querySelector(".shop").nextSibling
                );
              }
              container.innerHTML = buildVariantButtons(selected, group);
            } else {
              const container = li.querySelector(".variant-buttons");
              if (container) container.remove();
            }
          });

          // === NEW: LISTENER FOR CLICKABLE FILTERS (Delegation per card) ===
          // Actually, strictly speaking, delegation on the UL #results is better, 
          // but we can also add it here since we are inside the render loop.
          // However, keeping one listener on #results is more efficient. 
          // (Implemented below outside the loop for global delegation)

          results.appendChild(li);
        });

        // === PAGINATION (unchanged) ===
        const pagination = document.getElementById("pagination");
        pagination.innerHTML = "";
        pagination.style.display = "flex";

        const prevBtn = document.createElement("button");
        prevBtn.className = "sort-btn";
        prevBtn.textContent = "‡¶™‡¶ø‡¶õ‡¶®‡ßá";
        prevBtn.disabled = page === 1;
        prevBtn.addEventListener("click", () => {
          renderPage(page - 1);
          setTimeout(scrollAfterPageChange, 50);
        });
        pagination.appendChild(prevBtn);

        const info = document.createElement("span");
        info.style.cssText =
          "padding: 10px 16px; font-weight: 600; color: var(--text-light);";
        info.textContent = `‡¶™‡ßá‡¶ú ${page} / ${totalPages}`;
        pagination.appendChild(info);

        const nextBtn = document.createElement("button");
        nextBtn.className = "sort-btn";
        nextBtn.textContent = "‡¶™‡¶∞‡ßá‡¶∞ ‡¶™‡ßá‡¶ú";
        nextBtn.disabled = page === totalPages;
        nextBtn.addEventListener("click", () => {
          renderPage(page + 1);
          setTimeout(scrollAfterPageChange, 50);
        });
        pagination.appendChild(nextBtn);

        // Lazy load
        document.querySelectorAll("img[data-src]").forEach((img) => {
          imageObserver.observe(img);
        });
      }

      renderPage(1);
    }

    function applySort(tabletsList) {
      return tabletsList.sort((a, b) => {
        // Primary: Speed
        if (sortSpeedBtn.classList.contains("active")) {
          const scoreA = parseInt(a.info.score) || 0;
          const scoreB = parseInt(b.info.score) || 0;
          const diff =
            sortSpeedMode === "asc" ? scoreA - scoreB : scoreB - scoreA;
          if (diff !== 0) return diff;
        }
        // Secondary: Price
        const priceA = parseInt(a.price.replace(/\D/g, "")) || 0;
        const priceB = parseInt(b.price.replace(/\D/g, "")) || 0;
        return sortPriceMode === "asc" ? priceA - priceB : priceB - priceA;
      });
    }

    function showBrand(brandName) {
      currentBrand = brandName;
      sortControls.style.display = "flex";
      let brandTablets = brandMergeMap[brandName]
        ? tablets.filter((t) => brandMergeMap[brandName].includes(t.brand))
        : tablets.filter(
          (t) => t.brand.toLowerCase() === brandName.toLowerCase()
        );

      showAllVariants(applySort(brandTablets));
      if (window.innerWidth <= 768) scrollToResults();
    }

    function filterByPrice(min, max) {
      sortControls.style.display = "flex";
      let filtered = tablets.filter((t) => {
        const price = parseInt(t.price.replace(/\D/g, "")) || 0;
        return price >= min && (max === Infinity || price < max);
      });
      showAllVariants(applySort(filtered));
      if (window.innerWidth <= 768) scrollToResults();
    }

    // Sort Button Listeners
    sortPriceBtn.addEventListener("click", () => {
      sortPriceMode = sortPriceMode === "asc" ? "desc" : "asc";
      sortPriceBtn.textContent = `Price: ${sortPriceMode === "asc" ? "‡¶∏‡¶¨‡¶ö‡ßá‡ßü‡ßá ‡¶∏‡¶∏‡ßç‡¶§‡¶æ ‡¶Ü‡¶ó‡ßá" : "‡¶∏‡¶¨‡¶ö‡ßá‡ßü‡ßá ‡¶¶‡¶æ‡¶Æ‡¶ø ‡¶Ü‡¶ó‡ßá"
        }`;
      sortPriceBtn.classList.add("active");
      sortSpeedBtn.classList.remove("active");
      if (currentBrand) showBrand(currentBrand);
      else if (currentPriceRange) filterByPrice(...currentPriceRange);
      else if (currentFilterType) applyAttributeFilter(currentFilterType, currentFilterValue);
      else if (searchInput.value)
        searchInput.dispatchEvent(new Event("input"));
    });

    sortSpeedBtn.addEventListener("click", () => {
      sortSpeedMode = sortSpeedMode === "asc" ? "desc" : "asc";
      sortSpeedBtn.textContent = `Speed: ${sortSpeedMode === "asc"
        ? "‡¶∏‡ßç‡¶≤‡ßã ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡¶≤‡ßá‡¶ü ‡¶Ü‡¶ó‡ßá"
        : "‡¶™‡¶æ‡¶∞‡¶´‡¶∞‡ßç‡¶Æ‡ßá‡¶®‡ßç‡¶∏‡ßá ‡¶∏‡ßá‡¶∞‡¶æ ‡¶Ü‡¶ó‡ßá"
        }`;
      sortSpeedBtn.classList.add("active");
      sortPriceBtn.classList.remove("active");
      if (currentBrand) showBrand(currentBrand);
      else if (currentPriceRange) filterByPrice(...currentPriceRange);
      else if (currentFilterType) applyAttributeFilter(currentFilterType, currentFilterValue);
      else if (searchInput.value)
        searchInput.dispatchEvent(new Event("input"));
    });

    clearBtn.addEventListener("click", () => {
      searchInput.value = "";
      clearBtn.style.display = "none";
      autocompleteDiv.innerHTML = "";
      autocompleteDiv.style.border = "none"
      results.innerHTML = "";
      sortControls.style.display = "none";
      currentBrand = null;
      currentPriceRange = null;
      currentFilterType = null;
      currentFilterValue = null;
      document
        .querySelectorAll(".brand-card, .price-card")
        .forEach((c) => c.classList.remove("selected"));
      sortPriceBtn.classList.add("active");
      sortSpeedBtn.classList.remove("active");
      sortPriceMode = "asc";
      sortSpeedMode = "asc";
      sortPriceBtn.textContent = "‡¶∏‡¶¨‡¶ö‡ßá‡ßü‡ßá ‡¶∏‡¶∏‡ßç‡¶§‡¶æ ‡¶Ü‡¶ó‡ßá";
      sortSpeedBtn.textContent = "‡¶∏‡ßç‡¶≤‡ßã ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡¶≤‡ßá‡¶ü ‡¶Ü‡¶ó‡ßá";
      document.title = "KotoTaka ‚Äì Cheapest Tablet Prices in Bangladesh";
      const desc = document.querySelector('meta[name="description"]');
      if (desc)
        desc.content =
          "Find the lowest prices for Samsung, Xiaomi, iPad, Realme & more from local shops in Bangladesh. Updated daily.";
    });
    searchInput.addEventListener("input", () => {
      const query = searchInput.value.toLowerCase().trim();
      clearBtn.style.display = query ? "block" : "none";
      autocompleteDiv.innerHTML = "";
      autocompleteDiv.style.border = "none";
      results.innerHTML = "";
      sortControls.style.display = query ? "flex" : "none";
      currentBrand = null;
      currentPriceRange = null;
      currentFilterType = null;
      currentFilterValue = null;
      document
        .querySelectorAll(".brand-card, .price-card")
        .forEach((c) => c.classList.remove("selected"));
      if (!query || !tablets.length) return;

      const queryWords = query.split(/\s+/);
      const filtered = tablets.filter((t) =>
        queryWords.every((q) => t.searchWords.some((w) => w.startsWith(q)))
      );
      const uniqueNames = [
        ...new Set(filtered.map((t) => t.cleanName)),
      ].slice(0, 10);
      uniqueNames.forEach((name) => {
        const div = document.createElement("div");
        div.classList.add("autocomplete-item");
        div.textContent = name;
        div.addEventListener("click", () => {
          const clickedCleanName = name;
          searchInput.value = clickedCleanName;
          clearBtn.style.display = "block";
          autocompleteDiv.innerHTML = "";
          autocompleteDiv.style.border = "none";

          // Find all tablets that have this cleanName
          const searchResults = tablets.filter(
            (t) => t.cleanName === clickedCleanName
          );

          showAllVariants(applySort(searchResults));
          if (window.innerWidth <= 768) scrollToResults();
          updatePageMeta(
            clickedCleanName,
            `Latest price for ${clickedCleanName} in Bangladesh from local shops.`
          );
        });

        autocompleteDiv.style.border = "1px solid var(--border)";
        autocompleteDiv.appendChild(div);
      });
    });

    document.addEventListener("click", (e) => {
      // 1. Hide Autocomplete
      if (e.target !== searchInput && !autocompleteDiv.contains(e.target)) {
        autocompleteDiv.innerHTML = "";
        autocompleteDiv.style.border = "none";
      }

      // 2. Handle Click on Filterable Value
      if (e.target.classList.contains("filterable-value")) {
        const type = e.target.getAttribute("data-filter-type");
        const value = e.target.getAttribute("data-filter-value");
        if (type && value) {
          e.stopPropagation(); // prevent card click or other bubbling
          applyAttributeFilter(type, value);
        }
      }
    });

    function applyAttributeFilter(type, value) {
      // Clear other filters
      currentBrand = null;
      currentPriceRange = null;
      currentFilterType = type;
      currentFilterValue = value;

      searchInput.value = "";
      clearBtn.style.display = "none"; // Hide clear button per user request
      document
        .querySelectorAll(".brand-card, .price-card")
        .forEach((c) => c.classList.remove("selected"));

      // Also reset chipset select if it's not the one being clicked
      const chipsetSelect = document.querySelector(".chipset-select");
      if (chipsetSelect) chipsetSelect.selectedIndex = 0;

      // Filter
      const filtered = tablets.filter(t => {
        if (type === 'panel' && (value === 'AMOLED' || value === 'OLED')) {
          return t.info.panel === 'AMOLED' || t.info.panel === 'OLED';
        }
        return t.info[type] === value;
      });

      // Render
      showAllVariants(applySort(filtered));
      sortControls.style.display = "flex";

      // Meta & Scroll
      updatePageMeta(
        `${value} Tablets`,
        `Tablets with ${value} in Bangladesh ‚Äì lowest prices.`
      );
      if (window.innerWidth <= 768) scrollToResults();
      else scrollToResults();
    }

    let currentFilterType = null;
    let currentFilterValue = null;

    // Lazy loading for images
    const imageObserver = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const img = entry.target;
          img.src = img.dataset.src;
          img.classList.remove("lazy");
          imageObserver.unobserve(img);
        }
      });
    });

    function scrollToResults() {
      document
        .getElementById("results")
        .scrollIntoView({ behavior: "smooth" });
    }

    function scrollAfterPageChange() {
      scrollToResults();
    }
    const months = [
      "",
      "January",
      "February",
      "March",
      "April",
      "May",
      "June",
      "July",
      "August",
      "September",
      "October",
      "November",
      "December",
    ];
    function formatDate(d) {
      if (!d) return "Recently";
      const [day, month, year] = d.split("/");
      return `${parseInt(day)} ${months[parseInt(month)]}, ${year}`;
    }

    // FAQ toggle
    document.body.onclick = e => {
      if (e.target.closest('#faqBar')) {
        document.getElementById('faqContent').classList.toggle('open');
        document.getElementById('faqBar').classList.toggle('active');
      }
    };
  </script>
  <script src="tablet.js"></script>
  <script src="../nav-cooldown.js"></script>
</body>

</html>